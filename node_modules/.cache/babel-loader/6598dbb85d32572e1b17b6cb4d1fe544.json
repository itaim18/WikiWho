{"ast":null,"code":"const FACTS_API_DOMAIN = \"https://retoolapi.dev/tpsndH/doctorwhofacts/\";\nconst TARDIS_API_DOMAIN = \"https://serpapi.com/search.json?q=tardis&tbm=isch&ijn=0&api_key=463d599531ccb918fd213d24256a015b98048c5f2fb2a1a965c4e4196325a7d2\"; // export const getRandomImage = async () => {\n//   let randomPos = Math.floor(Math.random() * 99) + 1;\n//   const response = await fetch(TARDIS_API_DOMAIN);\n//   const data = await response.json();\n//   const thumbnail = data.images_results[randomPos].thumbnail;\n//   if (!response.ok) {\n//     throw new Error(data.message || \"Could not fetch fact.\");\n//   }\n//   return thumbnail;\n// };\n\nexport const getRandomFact = async () => {\n  let randomPos = Math.floor(Math.random() * 99) + 1;\n  const imgResponse = await fetch(TARDIS_API_DOMAIN);\n  const imgData = await imgResponse.json();\n  const img = imgData.images_results[randomPos].thumbnail;\n  let randomId = Math.floor(Math.random() * 53) + 1;\n  const response = await fetch(FACTS_API_DOMAIN + randomId);\n  const data = await response.json();\n\n  if (!imgResponse.ok) {\n    throw new Error(imgData.message || \"Could not fetch fact.\");\n  }\n\n  if (!response.ok) {\n    throw new Error(data.message || \"Could not fetch fact.\");\n  }\n\n  const fact = {\n    image: img,\n    id: data.id,\n    title: data.title,\n    text: data.text\n  };\n  return fact;\n};","map":{"version":3,"names":["FACTS_API_DOMAIN","TARDIS_API_DOMAIN","getRandomFact","randomPos","Math","floor","random","imgResponse","fetch","imgData","json","img","images_results","thumbnail","randomId","response","data","ok","Error","message","fact","image","id","title","text"],"sources":["C:/Users/itaim/WikiWho/src/lib/api.js"],"sourcesContent":["const FACTS_API_DOMAIN = \"https://retoolapi.dev/tpsndH/doctorwhofacts/\";\r\n\r\nconst TARDIS_API_DOMAIN =\r\n  \"https://serpapi.com/search.json?q=tardis&tbm=isch&ijn=0&api_key=463d599531ccb918fd213d24256a015b98048c5f2fb2a1a965c4e4196325a7d2\";\r\n// export const getRandomImage = async () => {\r\n//   let randomPos = Math.floor(Math.random() * 99) + 1;\r\n//   const response = await fetch(TARDIS_API_DOMAIN);\r\n//   const data = await response.json();\r\n//   const thumbnail = data.images_results[randomPos].thumbnail;\r\n\r\n//   if (!response.ok) {\r\n//     throw new Error(data.message || \"Could not fetch fact.\");\r\n//   }\r\n//   return thumbnail;\r\n// };\r\n\r\nexport const getRandomFact = async () => {\r\n  let randomPos = Math.floor(Math.random() * 99) + 1;\r\n  const imgResponse = await fetch(TARDIS_API_DOMAIN);\r\n  const imgData = await imgResponse.json();\r\n  const img = imgData.images_results[randomPos].thumbnail;\r\n  let randomId = Math.floor(Math.random() * 53) + 1;\r\n  const response = await fetch(FACTS_API_DOMAIN + randomId);\r\n  const data = await response.json();\r\n\r\n  if (!imgResponse.ok) {\r\n    throw new Error(imgData.message || \"Could not fetch fact.\");\r\n  }\r\n  if (!response.ok) {\r\n    throw new Error(data.message || \"Could not fetch fact.\");\r\n  }\r\n  const fact = {\r\n    image: img,\r\n    id: data.id,\r\n    title: data.title,\r\n    text: data.text,\r\n  };\r\n  return fact;\r\n};\r\n"],"mappings":"AAAA,MAAMA,gBAAgB,GAAG,8CAAzB;AAEA,MAAMC,iBAAiB,GACrB,kIADF,C,CAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAMC,aAAa,GAAG,YAAY;EACvC,IAAIC,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,EAA3B,IAAiC,CAAjD;EACA,MAAMC,WAAW,GAAG,MAAMC,KAAK,CAACP,iBAAD,CAA/B;EACA,MAAMQ,OAAO,GAAG,MAAMF,WAAW,CAACG,IAAZ,EAAtB;EACA,MAAMC,GAAG,GAAGF,OAAO,CAACG,cAAR,CAAuBT,SAAvB,EAAkCU,SAA9C;EACA,IAAIC,QAAQ,GAAGV,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,EAA3B,IAAiC,CAAhD;EACA,MAAMS,QAAQ,GAAG,MAAMP,KAAK,CAACR,gBAAgB,GAAGc,QAApB,CAA5B;EACA,MAAME,IAAI,GAAG,MAAMD,QAAQ,CAACL,IAAT,EAAnB;;EAEA,IAAI,CAACH,WAAW,CAACU,EAAjB,EAAqB;IACnB,MAAM,IAAIC,KAAJ,CAAUT,OAAO,CAACU,OAAR,IAAmB,uBAA7B,CAAN;EACD;;EACD,IAAI,CAACJ,QAAQ,CAACE,EAAd,EAAkB;IAChB,MAAM,IAAIC,KAAJ,CAAUF,IAAI,CAACG,OAAL,IAAgB,uBAA1B,CAAN;EACD;;EACD,MAAMC,IAAI,GAAG;IACXC,KAAK,EAAEV,GADI;IAEXW,EAAE,EAAEN,IAAI,CAACM,EAFE;IAGXC,KAAK,EAAEP,IAAI,CAACO,KAHD;IAIXC,IAAI,EAAER,IAAI,CAACQ;EAJA,CAAb;EAMA,OAAOJ,IAAP;AACD,CAtBM"},"metadata":{},"sourceType":"module"}